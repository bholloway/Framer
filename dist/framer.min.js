/*

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
*/
(function(i){function h(a,b,c,d,e){this._listener=b;this._isOnce=c;this.context=d;this._signal=a;this._priority=e||0}function g(a,b){if(typeof a!=="function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}function e(){this._bindings=[];this._prevParams=null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}h.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):
a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+
", isBound:"+this.isBound()+", active:"+this.active+"]"}};e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,c,d){var e=this._indexOfListener(a,c);if(e!==-1){if(a=this._bindings[e],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new h(this,a,b,c,d),this._addBinding(a);this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},
_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,d;c--;)if(d=this._bindings[c],d._listener===a&&d.context===b)return c;return-1},has:function(a,b){return this._indexOfListener(a,b)!==-1},add:function(a,b,c){g(a,"add");return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){g(a,"addOnce");return this._registerListener(a,
!0,b,c)},remove:function(a,b){g(a,"remove");var c=this._indexOfListener(a,b);c!==-1&&(this._bindings[c]._destroy(),this._bindings.splice(c,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),c=this._bindings.length,d;if(this.memorize)this._prevParams=
b;if(c){d=this._bindings.slice();this._shouldPropagate=!0;do c--;while(d[c]&&this._shouldPropagate&&d[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var f=e;f.Signal=e;typeof define==="function"&&define.amd?define(function(){return f}):typeof module!=="undefined"&&module.exports?module.exports=f:i.signals=
f})(this);

(function (window) {
"use strict";
function Frame(e,t,a,i){this.type=e,this.name=t,this.src=a,this.options=i,this.frameElement=void 0}function FrameMessage(e,t,a,i,s){this.type=e,this.data=t,this.origin=a,this.target=i,this.messenger=s}window.framer={managers:[],Manager:Manager,Client:Client,domLog:domLog};var ClientMessage="client",ManagerMessage="manager";
function closeFrameWindow(e){setTimeout(function(){try{e.frameElement.src="about:blank"}catch(t){}setTimeout(function(){e.frameElement.parentNode.removeChild(e.frameElement),e.frameElement=void 0},100)},0)}function createUrlArgs(e){var t=[],n=Object.getOwnPropertyNames(e);return n.forEach(function(n){var r=n+"="+encodeURI(e[n]);t.push(r)}),t.join("&")}function mergeOptions(e,t){var n=Object.getOwnPropertyNames(t);n.forEach(function(n){"undefined"==typeof e[n]&&(e[n]=t[n])})}function filterByKeyValue(e,t,n,r){var o,a=e.filter(function(e){return e[t]===n});if(a.length>0){var i=0;r&&(i=a.length-1),o=a[i]}return o}function parseParams(e){e=e||resolveHashSearch();var t=[],n=parseUris(e);for(var r in n)t.push({name:r,data:n[r]});return t}function resolveHashSearch(){if(""!==document.location.search)return document.location.search;var e=document.location.hash,t=e.substring(e.indexOf("?")+1,e.length);return t}function tryDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(t){console.error("There was an issue parsing the uri segment, check your iframe src",t)}}function parseUris(e){e=e.replace(/^\?/,"");for(var t,n,r={},o=(e||"").split("&"),a=0;a<o.length;a++){var i=o[a];if(i&&(t=i.replace(/\+/g,"%20").split("="),n=tryDecodeURIComponent(t[0]),isDefined(n))){var s=isDefined(t[1])?tryDecodeURIComponent(t[1]):!0;hasOwnProperty.call(r,n)?isArray(r[n])?r[n].push(s):r[n]=[r[n],s]:r[n]=s}}return r}function prependElement(e,t){return e.insertBefore(t,e.firstChild)}function setElementStyles(e,t){for(var n in t)e.style[n]=t[n]}function setElementAttributes(e,t){for(var n in t)e.setAttribute(n,t[n]);return e}function elementExistsByClassName(e){var t=window.document.getElementsByClassName(e);return t.length>0}function isDefined(e){return"undefined"!=typeof e}function domLog(e,t){var n="dom-log",r=document.getElementsByClassName(n)[0];r||(r=document.createElement("div"),r.className=n,r.style.position="absolute",r.style.top="0",r.style.right="0",prependElement(window.document.body,r));var o=document.createElement("p");o.innerText=e,o.style.color=t,o.style.fontSize="0.5em",r.appendChild(o)}
function Manager(e,t){this.name=e,this.frames=[],this.handlers=[],this.focus=null,this.persistentFrame=null,this.zIndex=99999,t&&t.container?(this.container=t.container,this.container.className+=" "+this.name):this.container=this.createFrameContainer(this.name),this.style={position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%",height:"100%",border:"none",margin:"0",padding:"0",overflow:"hidden"},this.listen();var n=signals.Signal;this.closed=new n,this.opened=new n,window.framer.managers.push(this)}Manager.prototype.receiveMessage=function(e){e.origin===document.location.origin&&(e.data.messenger!==ClientMessage||e.data.target!==this.name&&"undefined"!=typeof e.data.target||this.handleMessage(e.data))},Manager.prototype.destroy=function(){this.unListen()},Manager.prototype.listen=function(){this.listener=function(e){this.receiveMessage(e)}.bind(this),window.top.addEventListener("message",this.listener,!1)},Manager.prototype.unListen=function(){window.top.removeEventListener("message",this.listener),this.listener=void 0},Manager.prototype.send=function(e,t,n){var s=new FrameMessage(e,t,this.name,n,ManagerMessage);window.top.postMessage(s,document.location.origin)},Manager.prototype.on=function(e,t){filterByKeyValue(this.handlers,"type",e)?console.error("You already have a callback for type",e):this.handlers.push({type:e,callback:t})},Manager.prototype.add=function(e,t,n){var s=filterByKeyValue(this.frames,"name",e);if(s)return console.warn("Manager.add() there is already a frame named",e,"in the framer",this.name),s;n=n||{},isDefined(n.style)||(n.style=this.style),isDefined(n.append)||(n.append=!0),isDefined(n.persistent)||(n.persistent=!0);var a=new Frame(ClientMessage,e,t,n);return this.frames.push(a),a},Manager.prototype.open=function(e,t){var n=this.getFrame(e);return n?(this.focus&&this.focus!==n&&this.closeFrame(this.focus),this.focus=n,t&&mergeOptions(this.focus.options,t),this.openFrame(this.focus),this.opened.dispatch(n),n):void console.error("Manager open() there is no frame with that name",e)},Manager.prototype.openAbove=function(e,t){t=t||{},t.style=t.style||{};var n=this.getFrame(e);return n?(t.style.zIndex||(t.style.zIndex=n.style.zIndex+1),this.openFrame(n,t),n):void console.error("Manager open() there is no frame with that name",e)},Manager.prototype.close=function(e){var t=this.getFrame(e);return t?(this.closeFrame(t),this.focus=null,void this.closed.dispatch(t)):void console.warn("Manager close() there is no frame with that name",e)},Manager.prototype.handleMessage=function(e){var t=filterByKeyValue(this.handlers,"type",e.type);t&&t.callback.apply(this,[e.data])},Manager.prototype.openFrame=function(e,t){if(t&&mergeOptions(e.options,t),e.options.persistent)this.setPersistentFrame(e);else if(e.frameElement)console.warn("Manager",this.name,"already has",e.name,"open");else if(this.createFrameElement(e),e.options.append){var n=this.container;e.options.parent&&(n=e.options.parent),prependElement(n,e.frameElement)}},Manager.prototype.closeFrame=function(e){if(e.options.persistent&&null!==this.persistentFrame)this.persistentFrame.src="about:blank",this.persistentFrame.style.visibility="hidden";else if(e.frameElement){{e.frameElement.contentWindow}console.log("frame options",e.options),closeFrameWindow(e)}else console.warn("Manager",this.name,"frame",e.name,"is not open to close")},Manager.prototype.getFrame=function(e){var t;return"string"==typeof e?t=this.getFrameByName(e):Object.getOwnPropertyNames(e).name&&(t=this.frames.indexOf(e)),t},Manager.prototype.getFrameByName=function(e){var t,n=this.frames.filter(function(t){return t.name===e});return n.length>0&&(t=n[0]),t},Manager.prototype.setPersistentFrame=function(e){null===this.persistentFrame&&(this.persistentFrame=document.createElement("iframe"),prependElement(this.container,this.persistentFrame));var t=e.src,n=e.options;n.arguments=n.arguments||{},n.style=n.style||{},n.attributes=n.attributes||{};var s=createUrlArgs(n.arguments),a="&name="+e.name+"&"+s,r="?origin="+encodeURIComponent(document.location.href);setElementStyles(this.persistentFrame,n.style),setElementAttributes(this.persistentFrame,n.attributes),this.persistentFrame.id=e.name,this.persistentFrame.src=t+r+a,this.persistentFrame.style.visibility="visible",this.persistentFrame.sandbox="allow-forms allow-scripts allow-same-origin",e.frameElement=this.persistentFrame},Manager.prototype.createFrameElement=function(e){var t=e.src,n=e.options;n.arguments=n.arguments||{},n.style=n.style||{},n.attributes=n.attributes||{};var s=createUrlArgs(n.arguments),a="&name="+e.name+"&"+s,r="?origin="+encodeURIComponent(document.location.href),i=document.createElement("iframe");return setElementStyles(i,n.style),setElementAttributes(i,n.attributes),i.id=e.name,i.src=t+r+a,i.sandbox="allow-forms allow-scripts allow-same-origin",e.frameElement=i,e},Manager.prototype.createFrameContainer=function(e){var t;return elementExistsByClassName(e)||(t=window.document.createElement("div"),t.className=e,t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.zIndex=this.zIndex,prependElement(window.document.body,t)),t};
function Client(){this.handlers=[],this.params=parseParams();var e=filterByKeyValue(this.params,"name","name",!0),t=filterByKeyValue(this.params,"name","origin");return isDefined(e)&&isDefined(t)?(this.name=e.data,this.origin=t.data,void this.listen()):void console.info("A Framer Client will not work without the correct origin and name url args, origin and name")}Client.prototype.receiveMessage=function(e){e&&e.origin&&e.origin!==window.top.document.location.origin||e.data.messenger!==ManagerMessage||e.data.target!==this.name&&"undefined"!=typeof e.data.target||this.handleMessage(e.data)},Client.prototype.destroy=function(){this.unListen()},Client.prototype.listen=function(){this.listener=function(e){this.receiveMessage(e)}.bind(this),window.top.addEventListener("message",this.listener,!1)},Client.prototype.unListen=function(){window.top.removeEventListener("message",this.listener),this.listener=void 0},Client.prototype.handleMessage=function(e){var t=filterByKeyValue(this.handlers,"type",e.type);t&&t.callback.apply(this,[e.data])},Client.prototype.send=function(e,t,i){if(!isDefined(this.name)||!isDefined(this.origin))return void console.warn("Framer Client has no Manager to send",e,t);var n=new FrameMessage(e,t,this.name,i,ClientMessage);window.top.postMessage(n,this.origin)},Client.prototype.on=function(e,t){filterByKeyValue(this.handlers,"type",e)?console.error("You already have a callback for type",name):this.handlers.push({type:e,callback:t})};
function angularCloseFrameWindow(e){function n(){var n=a.get("$rootScope");n.$broadcast("$destroy"),setTimeout(function(){closeFrameWindow(e)},0)}var o=e.frameElement.contentWindow,t=o.angular.element(o.document.getElementById(e.options.angularAppId));console.log("ngApp",t);var a=o.angular.element(t).injector();n()}
})(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZyYW1lci5qcyIsInV0aWwuanMiLCJNYW5hZ2VyLmpzIiwiQ2xpZW50LmpzIiwiYW5ndWxhci1mcmFtZS5qcyJdLCJuYW1lcyI6WyJGcmFtZSIsInR5cGUiLCJuYW1lIiwic3JjIiwib3B0aW9ucyIsInRoaXMiLCJmcmFtZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJGcmFtZU1lc3NhZ2UiLCJkYXRhIiwib3JpZ2luIiwidGFyZ2V0IiwibWVzc2VuZ2VyIiwid2luZG93IiwiZnJhbWVyIiwibWFuYWdlcnMiLCJNYW5hZ2VyIiwiQ2xpZW50IiwiZG9tTG9nIiwiQ2xpZW50TWVzc2FnZSIsIk1hbmFnZXJNZXNzYWdlIiwiY2xvc2VGcmFtZVdpbmRvdyIsImZyYW1lIiwic2V0VGltZW91dCIsImV4IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiY3JlYXRlVXJsQXJncyIsImFyZ3MiLCJhcmdzTGlzdCIsInByb3BlcnRpZXMiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZm9yRWFjaCIsImVuY29kZWRBcmciLCJlbmNvZGVVUkkiLCJwdXNoIiwiam9pbiIsIm1lcmdlT3B0aW9ucyIsImV4aXN0aW5nIiwiY3VzdG9tIiwia2V5cyIsImtleSIsImZpbHRlckJ5S2V5VmFsdWUiLCJjb2xsZWN0aW9uIiwidmFsdWUiLCJsYXN0IiwibmVlZGxlIiwicmVzdWx0IiwiZmlsdGVyIiwiaXRlbSIsImxlbmd0aCIsInJlc3VsdEluZGV4IiwicGFyc2VQYXJhbXMiLCJoYXNoIiwicmVzb2x2ZUhhc2hTZWFyY2giLCJwYXJhbWV0ZXJzIiwic2VnbWVudHMiLCJwYXJzZVVyaXMiLCJkb2N1bWVudCIsImxvY2F0aW9uIiwic2VhcmNoIiwic3RyaXBwZWRIYXNoIiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsInRyeURlY29kZVVSSUNvbXBvbmVudCIsImRlY29kZVVSSUNvbXBvbmVudCIsImVycm9yIiwiY29uc29sZSIsImtleVZhbHVlIiwicmVwbGFjZSIsInNlZ21lbnRSZXN1bHRzIiwic3BsaXQiLCJpIiwia1ZhbHVlIiwiaXNEZWZpbmVkIiwidmFsIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaXNBcnJheSIsInByZXBlbmRFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImVsZW1lbnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwic2V0RWxlbWVudFN0eWxlcyIsInN0eWxlcyIsInN0eWxlIiwic2V0RWxlbWVudEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiZWxlbWVudEV4aXN0c0J5Q2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwiZXhpc3RpbmdFbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJtZXNzYWdlIiwiY29sb3IiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb24iLCJ0b3AiLCJyaWdodCIsImJvZHkiLCJsb2dNZXNzYWdlIiwiaW5uZXJUZXh0IiwiZm9udFNpemUiLCJhcHBlbmRDaGlsZCIsImZyYW1lcyIsImhhbmRsZXJzIiwiZm9jdXMiLCJwZXJzaXN0ZW50RnJhbWUiLCJ6SW5kZXgiLCJjcmVhdGVGcmFtZUNvbnRhaW5lciIsImxlZnQiLCJib3R0b20iLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlciIsIm1hcmdpbiIsInBhZGRpbmciLCJvdmVyZmxvdyIsImxpc3RlbiIsIlNpZ25hbCIsInNpZ25hbHMiLCJjbG9zZWQiLCJvcGVuZWQiLCJwcm90b3R5cGUiLCJyZWNlaXZlTWVzc2FnZSIsImV2ZW50IiwiaGFuZGxlTWVzc2FnZSIsImRlc3Ryb3kiLCJ1bkxpc3RlbiIsImxpc3RlbmVyIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2VuZCIsInBvc3RNZXNzYWdlIiwib24iLCJjYWxsYmFjayIsImFkZCIsIndhcm4iLCJhcHBlbmQiLCJwZXJzaXN0ZW50Iiwib3BlbiIsImdldEZyYW1lIiwiY2xvc2VGcmFtZSIsIm9wZW5GcmFtZSIsImRpc3BhdGNoIiwib3BlbkFib3ZlIiwiY2xvc2UiLCJhcHBseSIsInNldFBlcnNpc3RlbnRGcmFtZSIsImNyZWF0ZUZyYW1lRWxlbWVudCIsInBhcmVudCIsInZpc2liaWxpdHkiLCJjb250ZW50V2luZG93IiwibG9nIiwiZXhpc3RpbmdGcmFtZSIsImdldEZyYW1lQnlOYW1lIiwiYXJndW1lbnRzIiwicGFyYW1zIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaHJlZiIsImlkIiwic2FuZGJveCIsImlmcmFtZSIsImluZm8iLCJhbmd1bGFyQ2xvc2VGcmFtZVdpbmRvdyIsImRlc3Ryb3lBbGxTY29wZXMiLCJyb290U2NvcGUiLCJpbmplY3RvciIsImdldCIsIiRicm9hZGNhc3QiLCJjaGlsZFdpbmRvdyIsIm5nQXBwIiwiYW5ndWxhciIsImdldEVsZW1lbnRCeUlkIiwiYW5ndWxhckFwcElkIl0sIm1hcHBpbmdzIjoiQUFVQSxRQUFTQSxPQUFNQyxFQUFNQyxFQUFNQyxFQUFLQyxHQUM1QkMsS0FBS0osS0FBT0EsRUFDWkksS0FBS0gsS0FBT0EsRUFDWkcsS0FBS0YsSUFBTUEsRUFDWEUsS0FBS0QsUUFBVUEsRUFDZkMsS0FBS0MsYUFBZUMsT0FHeEIsUUFBU0MsY0FBYVAsRUFBTVEsRUFBTUMsRUFBUUMsRUFBUUMsR0FDOUNQLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtJLEtBQU9BLEVBQ1pKLEtBQUtLLE9BQVNBLEVBQ2RMLEtBQUtNLE9BQVNBLEVBQ2ROLEtBQUtPLFVBQVlBLEVBdkJyQkMsT0FBT0MsUUFDSEMsWUFDQUMsUUFBU0EsUUFDVEMsT0FBUUEsT0FDUkMsT0FBUUEsT0FHWixJQUFJQyxlQUFnQixTQUNoQkMsZUFBaUI7QUNSckIsUUFBU0Msa0JBQWlCQyxHQUN0QkMsV0FBVyxXQUNQLElBQ0lELEVBQU1oQixhQUFhSCxJQUFNLGNBRTdCLE1BQU9xQixJQUdQRCxXQUFXLFdBQ1BELEVBQU1oQixhQUFhbUIsV0FBV0MsWUFBWUosRUFBTWhCLGNBQ2hEZ0IsRUFBTWhCLGFBQWVD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LEVBQVMzRixLQUFLSyxTQUd6Q08sT0FBTzhHLFVBQVVZLEdBQUssU0FBVTFJLEVBQU0ySSxHQUM3QmpHLGlCQUFpQnRDLEtBQUt3RyxTQUFVLE9BQVE1RyxHQU16Q21FLFFBQVFELE1BQU0sdUNBQXdDakUsTUFMdERHLEtBQUt3RyxTQUFTekUsTUFDVm5DLEtBQU1BLEVBQ04ySSxTQUFVQTtBQ25FdEIsUUFBUzZCLHlCQUF3Qm5KLEdBUTdCLFFBQVNvSixLQUNMLEdBQUlDLEdBQVlDLEVBQVNDLElBQUksYUFDN0JGLEdBQVVHLFdBQVcsWUFDckJ2SixXQUFXLFdBQ1BGLGlCQUFpQkMsSUFDbEIsR0FaUCxHQUFJeUosR0FBY3pKLEVBQU1oQixhQUFhdUosY0FDakNtQixFQUFRRCxFQUFZRSxRQUFRL0YsUUFBUTZGLEVBQVlwSCxTQUFTdUgsZUFBZTVKLEVBQU1sQixRQUFRK0ssY0FDMUYvRyxTQUFRMEYsSUFBSSxRQUFTa0IsRUFFckIsSUFBSUosR0FBV0csRUFBWUUsUUFBUS9GLFFBQVE4RixHQUFPSixVQUNsREYiLCJmaWxlIjoiZnJhbWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5mcmFtZXIgPSB7XHJcbiAgICBtYW5hZ2VyczogW10sXHJcbiAgICBNYW5hZ2VyOiBNYW5hZ2VyLFxyXG4gICAgQ2xpZW50OiBDbGllbnQsXHJcbiAgICBkb21Mb2c6IGRvbUxvZ1xyXG59O1xyXG5cclxudmFyIENsaWVudE1lc3NhZ2UgPSAnY2xpZW50JztcclxudmFyIE1hbmFnZXJNZXNzYWdlID0gJ21hbmFnZXInO1xyXG5cclxuZnVuY3Rpb24gRnJhbWUodHlwZSwgbmFtZSwgc3JjLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuc3JjID0gc3JjO1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuZnJhbWVFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBGcmFtZU1lc3NhZ2UodHlwZSwgZGF0YSwgb3JpZ2luLCB0YXJnZXQsIG1lc3Nlbmdlcikge1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcclxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgdGhpcy5tZXNzZW5nZXIgPSBtZXNzZW5nZXI7XHJcbn0iLCJmdW5jdGlvbiBjbG9zZUZyYW1lV2luZG93KGZyYW1lKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmcmFtZS5mcmFtZUVsZW1lbnQuc3JjID0gJ2Fib3V0OmJsYW5rJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZyYW1lLmZyYW1lRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGZyYW1lLmZyYW1lRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGZyYW1lLmZyYW1lRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfSwgMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVVybEFyZ3MoYXJncykge1xyXG4gICAgdmFyIGFyZ3NMaXN0ID0gW107XHJcbiAgICB2YXIgcHJvcGVydGllcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFyZ3MpO1xyXG5cclxuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiBwcm9wZXJ0eVJlc29sdmVyKG5hbWUpIHtcclxuICAgICAgICB2YXIgZW5jb2RlZEFyZyA9IG5hbWUgKyAnPScgKyBlbmNvZGVVUkkoYXJnc1tuYW1lXSk7XHJcbiAgICAgICAgYXJnc0xpc3QucHVzaChlbmNvZGVkQXJnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBhcmdzTGlzdC5qb2luKCcmJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhleGlzdGluZywgY3VzdG9tKSB7XHJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1c3RvbSk7XHJcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3Rpbmdba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZXhpc3Rpbmdba2V5XSA9IGN1c3RvbVtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWx0ZXJCeUtleVZhbHVlKGNvbGxlY3Rpb24sIGtleSwgdmFsdWUsIGxhc3QpIHtcclxuICAgIHZhciBuZWVkbGU7XHJcbiAgICB2YXIgcmVzdWx0ID0gY29sbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gaXRlbVtrZXldID09PSB2YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciByZXN1bHRJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKGxhc3QpIHtcclxuICAgICAgICAgICAgcmVzdWx0SW5kZXggPSByZXN1bHQubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmVlZGxlID0gcmVzdWx0W3Jlc3VsdEluZGV4XTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZWVkbGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlUGFyYW1zKGhhc2gpIHtcclxuICAgIGhhc2ggPSBoYXNoIHx8IHJlc29sdmVIYXNoU2VhcmNoKCk7XHJcbiAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xyXG5cclxuICAgIHZhciBzZWdtZW50cyA9IHBhcnNlVXJpcyhoYXNoKTtcclxuICAgIGZvciAodmFyIG5hbWUgaW4gc2VnbWVudHMpIHtcclxuICAgICAgICBwYXJhbWV0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICBkYXRhOiBzZWdtZW50c1tuYW1lXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXJhbWV0ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNvbHZlSGFzaFNlYXJjaCgpIHtcclxuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2ggIT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoO1xyXG4gICAgICAgIHZhciBzdHJpcHBlZEhhc2ggPSBoYXNoLnN1YnN0cmluZyhoYXNoLmluZGV4T2YoJz8nKSArIDEsIGhhc2gubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gc3RyaXBwZWRIYXNoO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0cnlEZWNvZGVVUklDb21wb25lbnQodmFsdWUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZXJlIHdhcyBhbiBpc3N1ZSBwYXJzaW5nIHRoZSB1cmkgc2VnbWVudCwgY2hlY2sgeW91ciBpZnJhbWUgc3JjJywgZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVVyaXMoa2V5VmFsdWUpIHtcclxuICAgIGtleVZhbHVlID0ga2V5VmFsdWUucmVwbGFjZSgvXlxcPy8sICcnKTtcclxuICAgIHZhciBzZWdtZW50UmVzdWx0cyA9IHt9LCB2YWx1ZSwga2V5O1xyXG4gICAgdmFyIHNlZ21lbnRzID0gKGtleVZhbHVlIHx8IFwiXCIpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGtWYWx1ZSA9IHNlZ21lbnRzW2ldO1xyXG4gICAgICAgIGlmIChrVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBrVmFsdWUucmVwbGFjZSgvXFwrL2csICclMjAnKS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQodmFsdWVbMF0pO1xyXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBpc0RlZmluZWQodmFsdWVbMV0pID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlWzFdKSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoc2VnbWVudFJlc3VsdHMsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50UmVzdWx0c1trZXldID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHNlZ21lbnRSZXN1bHRzW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudFJlc3VsdHNba2V5XS5wdXNoKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRSZXN1bHRzW2tleV0gPSBbc2VnbWVudFJlc3VsdHNba2V5XSwgdmFsXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzZWdtZW50UmVzdWx0cztcclxufVxyXG5cclxuZnVuY3Rpb24gcHJlcGVuZEVsZW1lbnQocGFyZW50RWxlbWVudCwgZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEVsZW1lbnRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XHJcbiAgICBmb3IgKHZhciBzdHlsZSBpbiBzdHlsZXMpIHtcclxuICAgICAgICBlbGVtZW50LnN0eWxlW3N0eWxlXSA9IHN0eWxlc1tzdHlsZV07XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEVsZW1lbnRBdHRyaWJ1dGVzKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcclxuICAgIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCBhdHRyaWJ1dGVzW2F0dHJpYnV0ZV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVsZW1lbnRFeGlzdHNCeUNsYXNzTmFtZShjbGFzc05hbWUpIHtcclxuICAgIHZhciBleGlzdGluZ0VsZW1lbnRzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcclxuICAgIHJldHVybiBleGlzdGluZ0VsZW1lbnRzLmxlbmd0aCA+IDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW1wbGUgdXRpbGl0eSB0byBsb2cgbWVzc2FnZXMgdG8gdGhlIGRvbS5cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICogQHBhcmFtIGNvbG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBkb21Mb2cobWVzc2FnZSwgY29sb3IpIHtcclxuICAgIHZhciBjbGFzc05hbWUgPSAnZG9tLWxvZyc7XHJcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpWzBdO1xyXG4gICAgaWYgKCFjb250YWluZXIpIHtcclxuICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcclxuICAgICAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSAnMCc7XHJcbiAgICAgICAgcHJlcGVuZEVsZW1lbnQod2luZG93LmRvY3VtZW50LmJvZHksIGNvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxvZ01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBsb2dNZXNzYWdlLmlubmVyVGV4dCA9IG1lc3NhZ2U7XHJcbiAgICBsb2dNZXNzYWdlLnN0eWxlLmNvbG9yID0gY29sb3I7XHJcbiAgICBsb2dNZXNzYWdlLnN0eWxlLmZvbnRTaXplID0gJzAuNWVtJztcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2dNZXNzYWdlKTtcclxufSIsIlxyXG4vKipcclxuICogTWFuYWdlciBpcyB0aGUgbWFuYWdlciBvZiBhIHNldCBvZiBpZnJhbWUvd2VidmlldyBlbGVtZW50c1xyXG4gKiB0aGF0IGNhbiBjb21tdW5pY2F0ZSB3aXRoIHNlbmQgYW5kIHJlY2VpdmUuXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gTWFuYWdlcihuYW1lLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5mcmFtZXMgPSBbXTtcclxuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcclxuICAgIHRoaXMuZm9jdXMgPSBudWxsO1xyXG4gICAgdGhpcy5wZXJzaXN0ZW50RnJhbWUgPSBudWxsO1xyXG4gICAgdGhpcy56SW5kZXggPSA5OTk5OTtcclxuICAgIGlmKG9wdGlvbnMgJiYgb3B0aW9ucy5jb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSArPSAoJyAnICsgdGhpcy5uYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmNyZWF0ZUZyYW1lQ29udGFpbmVyKHRoaXMubmFtZSk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgZGVmYXVsdCBzdHlsZSB3aWxsIG1ha2UgdGhlIGZyYW1lcyBmdWxsc2NyZWVuIGFzIGlmIHRoaXMgaXMgYVxyXG4gICAgLy8gc2luZ2xlIGZyYW1lIGFwcGxpY2F0aW9uIDspXHJcbiAgICB0aGlzLnN0eWxlID0ge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxyXG4gICAgICAgIHRvcDogJzBweCcsXHJcbiAgICAgICAgbGVmdDogJzBweCcsXHJcbiAgICAgICAgYm90dG9tOiAnMHB4JyxcclxuICAgICAgICByaWdodDogJzBweCcsXHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICBib3JkZXI6ICdub25lJyxcclxuICAgICAgICBtYXJnaW46ICcwJyxcclxuICAgICAgICBwYWRkaW5nOiAnMCcsXHJcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubGlzdGVuKCk7XHJcblxyXG4gICAgdmFyIFNpZ25hbCA9IHNpZ25hbHMuU2lnbmFsO1xyXG4gICAgdGhpcy5jbG9zZWQgPSBuZXcgU2lnbmFsKCk7XHJcbiAgICB0aGlzLm9wZW5lZCA9IG5ldyBTaWduYWwoKTtcclxuXHJcbiAgICB3aW5kb3cuZnJhbWVyLm1hbmFnZXJzLnB1c2godGhpcyk7XHJcbn1cclxuXHJcbk1hbmFnZXIucHJvdG90eXBlLnJlY2VpdmVNZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQub3JpZ2luICE9PSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LmRhdGEubWVzc2VuZ2VyID09PSBDbGllbnRNZXNzYWdlICYmXHJcbiAgICAgICAgKGV2ZW50LmRhdGEudGFyZ2V0ID09PSB0aGlzLm5hbWUgfHwgdHlwZW9mIGV2ZW50LmRhdGEudGFyZ2V0ID09PSAndW5kZWZpbmVkJykpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NYW5hZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnVuTGlzdGVuKCk7XHJcbn07XHJcblxyXG5NYW5hZ2VyLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZShldmVudCk7XHJcbiAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgd2luZG93LnRvcC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5saXN0ZW5lciwgZmFsc2UpO1xyXG59O1xyXG5cclxuTWFuYWdlci5wcm90b3R5cGUudW5MaXN0ZW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy50b3AucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMubGlzdGVuZXIpO1xyXG4gICAgdGhpcy5saXN0ZW5lciA9IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZW5kIGEgbWVzc2FnZSB0byBhIENsaWVudCwgaWYgbm8gdGFyZ2V0IGlzIHNwZWNpZmllZCBzZW5kIHRvIGFsbC5cclxuICogQHBhcmFtIHR5cGUgdGhlIG1lc3NhZ2UgdHlwZSB0byB1c2UgYmFzZWQgdGhhdCBkZXNjcmliZXMgdGhlIGZlYXR1cmUsIGVnIHN1Ym1pdCwgc2VuZCwgbG9nb3V0XHJcbiAqIEBwYXJhbSBkYXRhIHRoZSBvYXRcclxuICogQHBhcmFtIHRhcmdldFxyXG4gKi9cclxuTWFuYWdlci5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uICh0eXBlLCBkYXRhLCB0YXJnZXQpIHtcclxuICAgIHZhciBtZXNzYWdlID0gbmV3IEZyYW1lTWVzc2FnZSh0eXBlLCBkYXRhLCB0aGlzLm5hbWUsIHRhcmdldCwgTWFuYWdlck1lc3NhZ2UpO1xyXG4gICAgd2luZG93LnRvcC5wb3N0TWVzc2FnZShtZXNzYWdlLCBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlY2VpdmUgYSBtZXNzYWdlIG9uIGEgTWFuYWdlciBpbnN0YW5jZS4gVGhlIGNhbGxiYWNrIHdpbGwgcmVjaWV2ZSB0aGUgZGF0YVxyXG4gKiB2YWx1ZSBzZW50IHdpdGggTWFuYWdlci5wcm90b3R5cGUuc2VuZCgpXHJcbiAqIEBwYXJhbSB0eXBlXHJcbiAqIEBwYXJhbSBjYWxsYmFja1xyXG4gKi9cclxuTWFuYWdlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodHlwZSwgY2FsbGJhY2spIHtcclxuICAgIGlmICghZmlsdGVyQnlLZXlWYWx1ZSh0aGlzLmhhbmRsZXJzLCAndHlwZScsIHR5cGUpKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHtcclxuICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lvdSBhbHJlYWR5IGhhdmUgYSBjYWxsYmFjayBmb3IgdHlwZScsIHR5cGUpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZCBhIG5ldyBmcmFtZSB0byB0aGUgTWFuYWdlciBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIG5hbWUgdGhlIHVuaXF1ZSBuYW1lIHRvIG1hbmFnZSBhbmQgcmVjaWV2ZSBtZXNzYWdlc1xyXG4gKiBAcGFyYW0gc3JjIHRoZSBzcmMgdXJsIHRoYXQgaXMgZ2l2ZW4gdG8gdGhlIGlmcmFtZS93ZWJ2aWV3XHJcbiAqIEBwYXJhbSBvcHRpb25zIGFuIG9iamVjdCB3aXRoIHZhbHVlcyBmb3Igc3R5bGUsIGF0dHJpYnV0ZXMgYW5kIHVybCBhcmd1bWVudHMgZm9yIHRoZSBzcmNcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5NYW5hZ2VyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobmFtZSwgc3JjLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgZXhpc3RpbmcgPSBmaWx0ZXJCeUtleVZhbHVlKHRoaXMuZnJhbWVzLCAnbmFtZScsIG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdNYW5hZ2VyLmFkZCgpIHRoZXJlIGlzIGFscmVhZHkgYSBmcmFtZSBuYW1lZCcsXHJcbiAgICAgICAgICAgIG5hbWUsICdpbiB0aGUgZnJhbWVyJywgdGhpcy5uYW1lKTtcclxuICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBpZiAoIWlzRGVmaW5lZChvcHRpb25zLnN0eWxlKSkge1xyXG4gICAgICAgIG9wdGlvbnMuc3R5bGUgPSB0aGlzLnN0eWxlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0RlZmluZWQob3B0aW9ucy5hcHBlbmQpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5hcHBlbmQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0RlZmluZWQob3B0aW9ucy5wZXJzaXN0ZW50KSkge1xyXG4gICAgICAgIG9wdGlvbnMucGVyc2lzdGVudCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZyYW1lID0gbmV3IEZyYW1lKENsaWVudE1lc3NhZ2UsIG5hbWUsIHNyYywgb3B0aW9ucyk7XHJcbiAgICB0aGlzLmZyYW1lcy5wdXNoKGZyYW1lKTtcclxuXHJcbiAgICByZXR1cm4gZnJhbWU7XHJcbn07XHJcblxyXG4vKipcclxuICogT3BlbiBhIGZyYW1lIGJ5IG5hbWUgYW5kIGNsb3NlIGFueSBvcGVuZWQgZnJhbWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZVxyXG4gKiBAcGFyYW0gb3B0aW9uc1xyXG4gKi9cclxuTWFuYWdlci5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldEZyYW1lKG5hbWUpO1xyXG4gICAgaWYgKCFleGlzdGluZykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hbmFnZXIgb3BlbigpIHRoZXJlIGlzIG5vIGZyYW1lIHdpdGggdGhhdCBuYW1lJywgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZm9jdXMgJiYgdGhpcy5mb2N1cyAhPT0gZXhpc3RpbmcpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRnJhbWUodGhpcy5mb2N1cyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZvY3VzID0gZXhpc3Rpbmc7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICBtZXJnZU9wdGlvbnModGhpcy5mb2N1cy5vcHRpb25zLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIHRoaXMub3BlbkZyYW1lKHRoaXMuZm9jdXMpO1xyXG5cclxuICAgIHRoaXMub3BlbmVkLmRpc3BhdGNoKGV4aXN0aW5nKTtcclxuXHJcbiAgICByZXR1cm4gZXhpc3Rpbmc7XHJcbn07XHJcblxyXG4vKipcclxuICogT3BlbiBhIGZyYW1lIGJ5IG5hbWUgYW5kIGluc3RlYWQgb2YgY2xvc2luZyBhbnkgb3BlbmVkIGZyYW1lcyxcclxuICogdGhpcyBmcmFtZSB3aWxsIGluc3RlYWQgb3BlbiBhdCBhIHpJbmRleCBhYm92ZSB0aGUgZXhpc3Rpbmcgb3BlbmVkIGZyYW1lLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZVxyXG4gKiBAcGFyYW0gb3B0aW9uc1xyXG4gKi9cclxuTWFuYWdlci5wcm90b3R5cGUub3BlbkFib3ZlID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5zdHlsZSA9IG9wdGlvbnMuc3R5bGUgfHwge307XHJcblxyXG4gICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXRGcmFtZShuYW1lKTtcclxuICAgIGlmICghZXhpc3RpbmcpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdNYW5hZ2VyIG9wZW4oKSB0aGVyZSBpcyBubyBmcmFtZSB3aXRoIHRoYXQgbmFtZScsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghb3B0aW9ucy5zdHlsZS56SW5kZXgpIHtcclxuICAgICAgICBvcHRpb25zLnN0eWxlLnpJbmRleCA9IGV4aXN0aW5nLnN0eWxlLnpJbmRleCArIDE7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9wZW5GcmFtZShleGlzdGluZywgb3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIGV4aXN0aW5nO1xyXG59O1xyXG5cclxuTWFuYWdlci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXRGcmFtZShuYW1lKTtcclxuICAgIGlmICghZXhpc3RpbmcpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ01hbmFnZXIgY2xvc2UoKSB0aGVyZSBpcyBubyBmcmFtZSB3aXRoIHRoYXQgbmFtZScsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuY2xvc2VGcmFtZShleGlzdGluZyk7XHJcbiAgICB0aGlzLmZvY3VzID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmNsb3NlZC5kaXNwYXRjaChleGlzdGluZyk7XHJcbn07XHJcblxyXG5NYW5hZ2VyLnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHZhciByZXN1bHQgPSBmaWx0ZXJCeUtleVZhbHVlKHRoaXMuaGFuZGxlcnMsICd0eXBlJywgbWVzc2FnZS50eXBlKTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICByZXN1bHQuY2FsbGJhY2suYXBwbHkodGhpcywgW21lc3NhZ2UuZGF0YV0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTWFuYWdlci5wcm90b3R5cGUub3BlbkZyYW1lID0gZnVuY3Rpb24gKGZyYW1lLCBvcHRpb25zKSB7XHJcbiAgICAvL21lcmdlIGV4aXN0aW5nIG9wdGlvbnMgd2l0aCBvdmVycmlkZVxyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICBtZXJnZU9wdGlvbnMoZnJhbWUub3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZnJhbWUub3B0aW9ucy5wZXJzaXN0ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRQZXJzaXN0ZW50RnJhbWUoZnJhbWUpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoIWZyYW1lLmZyYW1lRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlRnJhbWVFbGVtZW50KGZyYW1lKTtcclxuICAgICAgICBpZiAoZnJhbWUub3B0aW9ucy5hcHBlbmQpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUub3B0aW9ucy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudCA9IGZyYW1lLm9wdGlvbnMucGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZXBlbmRFbGVtZW50KHBhcmVudCwgZnJhbWUuZnJhbWVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignTWFuYWdlcicsIHRoaXMubmFtZSwgJ2FscmVhZHkgaGFzJywgZnJhbWUubmFtZSwgJ29wZW4nKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1hbmFnZXIucHJvdG90eXBlLmNsb3NlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWUpIHtcclxuICAgIGlmKGZyYW1lLm9wdGlvbnMucGVyc2lzdGVudCAmJiB0aGlzLnBlcnNpc3RlbnRGcmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RnJhbWUuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICAgIH0gZWxzZSBpZihmcmFtZS5mcmFtZUVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgY2hpbGRXaW5kb3cgPSBmcmFtZS5mcmFtZUVsZW1lbnQuY29udGVudFdpbmRvdztcclxuICAgICAgICBjb25zb2xlLmxvZygnZnJhbWUgb3B0aW9ucycsIGZyYW1lLm9wdGlvbnMpO1xyXG4gICAgICAgIC8vaWYgKGZyYW1lLm9wdGlvbnMuYW5ndWxhckFwcElkICYmIGNoaWxkV2luZG93LmFuZ3VsYXIpIHtcclxuICAgICAgICAvLyAgICBhbmd1bGFyQ2xvc2VGcmFtZVdpbmRvdyhmcmFtZSk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy9lbHNlIHtcclxuICAgICAgICAgICAgY2xvc2VGcmFtZVdpbmRvdyhmcmFtZSk7XHJcbiAgICAgICAgLy99XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignTWFuYWdlcicsIHRoaXMubmFtZSwgJ2ZyYW1lJywgZnJhbWUubmFtZSwgJ2lzIG5vdCBvcGVuIHRvIGNsb3NlJyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NYW5hZ2VyLnByb3RvdHlwZS5nZXRGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZSkge1xyXG4gICAgdmFyIGV4aXN0aW5nRnJhbWU7XHJcbiAgICBpZiAodHlwZW9mIGZyYW1lID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGV4aXN0aW5nRnJhbWUgPSB0aGlzLmdldEZyYW1lQnlOYW1lKGZyYW1lKVxyXG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhmcmFtZSkubmFtZSkge1xyXG4gICAgICAgIGV4aXN0aW5nRnJhbWUgPSB0aGlzLmZyYW1lcy5pbmRleE9mKGZyYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXhpc3RpbmdGcmFtZTtcclxufTtcclxuXHJcbk1hbmFnZXIucHJvdG90eXBlLmdldEZyYW1lQnlOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgIHZhciBmcmFtZTtcclxuICAgIHZhciByZXN1bHQgPSB0aGlzLmZyYW1lcy5maWx0ZXIoZnVuY3Rpb24gKGZyYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZyYW1lLm5hbWUgPT09IG5hbWU7XHJcbiAgICB9KTtcclxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZyYW1lID0gcmVzdWx0WzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmcmFtZTtcclxufTtcclxuXHJcbk1hbmFnZXIucHJvdG90eXBlLnNldFBlcnNpc3RlbnRGcmFtZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XHJcbiAgICBpZih0aGlzLnBlcnNpc3RlbnRGcmFtZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICAgICAgcHJlcGVuZEVsZW1lbnQodGhpcy5jb250YWluZXIsIHRoaXMucGVyc2lzdGVudEZyYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc3JjID0gZnJhbWUuc3JjO1xyXG4gICAgdmFyIG9wdGlvbnMgPSBmcmFtZS5vcHRpb25zO1xyXG4gICAgb3B0aW9ucy5hcmd1bWVudHMgPSBvcHRpb25zLmFyZ3VtZW50cyB8fCB7fTtcclxuICAgIG9wdGlvbnMuc3R5bGUgPSBvcHRpb25zLnN0eWxlIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5hdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xyXG4gICAgdmFyIHBhcmFtZXRlcnMgPSBjcmVhdGVVcmxBcmdzKG9wdGlvbnMuYXJndW1lbnRzKTtcclxuICAgIHZhciBwYXJhbXMgPSAnJm5hbWU9JyArIGZyYW1lLm5hbWUgKyAnJicgKyBwYXJhbWV0ZXJzO1xyXG4gICAgdmFyIG9yaWdpbiA9ICc/b3JpZ2luPScgKyBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcblxyXG4gICAgc2V0RWxlbWVudFN0eWxlcyh0aGlzLnBlcnNpc3RlbnRGcmFtZSwgb3B0aW9ucy5zdHlsZSk7XHJcbiAgICBzZXRFbGVtZW50QXR0cmlidXRlcyh0aGlzLnBlcnNpc3RlbnRGcmFtZSwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcclxuXHJcbiAgICB0aGlzLnBlcnNpc3RlbnRGcmFtZS5pZCA9IGZyYW1lLm5hbWU7XHJcbiAgICB0aGlzLnBlcnNpc3RlbnRGcmFtZS5zcmMgPSBzcmMgKyBvcmlnaW4gKyBwYXJhbXM7XHJcbiAgICB0aGlzLnBlcnNpc3RlbnRGcmFtZS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgdGhpcy5wZXJzaXN0ZW50RnJhbWUuc2FuZGJveCA9ICdhbGxvdy1mb3JtcyBhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luJztcclxuICAgIGZyYW1lLmZyYW1lRWxlbWVudCA9IHRoaXMucGVyc2lzdGVudEZyYW1lO1xyXG5cclxufTtcclxuXHJcbk1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZUZyYW1lRWxlbWVudCA9IGZ1bmN0aW9uIChmcmFtZSkge1xyXG4gICAgdmFyIHNyYyA9IGZyYW1lLnNyYztcclxuICAgIHZhciBvcHRpb25zID0gZnJhbWUub3B0aW9ucztcclxuICAgIG9wdGlvbnMuYXJndW1lbnRzID0gb3B0aW9ucy5hcmd1bWVudHMgfHwge307XHJcbiAgICBvcHRpb25zLnN0eWxlID0gb3B0aW9ucy5zdHlsZSB8fCB7fTtcclxuICAgIG9wdGlvbnMuYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcclxuICAgIHZhciBwYXJhbWV0ZXJzID0gY3JlYXRlVXJsQXJncyhvcHRpb25zLmFyZ3VtZW50cyk7XHJcbiAgICB2YXIgcGFyYW1zID0gJyZuYW1lPScgKyBmcmFtZS5uYW1lICsgJyYnICsgcGFyYW1ldGVycztcclxuICAgIHZhciBvcmlnaW4gPSAnP29yaWdpbj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xyXG5cclxuICAgIC8vdG9kbyB3ZWJ2aWV3IG1zLWFwcC13ZWJ2aWV3XHJcbiAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcblxyXG4gICAgc2V0RWxlbWVudFN0eWxlcyhpZnJhbWUsIG9wdGlvbnMuc3R5bGUpO1xyXG4gICAgc2V0RWxlbWVudEF0dHJpYnV0ZXMoaWZyYW1lLCBvcHRpb25zLmF0dHJpYnV0ZXMpO1xyXG5cclxuICAgIGlmcmFtZS5pZCA9IGZyYW1lLm5hbWU7XHJcbiAgICBpZnJhbWUuc3JjID0gc3JjICsgb3JpZ2luICsgcGFyYW1zO1xyXG4gICAgaWZyYW1lLnNhbmRib3ggPSAnYWxsb3ctZm9ybXMgYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbic7XHJcbiAgICBmcmFtZS5mcmFtZUVsZW1lbnQgPSBpZnJhbWU7XHJcblxyXG4gICAgcmV0dXJuIGZyYW1lO1xyXG59O1xyXG5cclxuXHJcblxyXG5NYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVGcmFtZUNvbnRhaW5lciA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgIHZhciBjb250YWluZXI7XHJcbiAgICBpZiAoIWVsZW1lbnRFeGlzdHNCeUNsYXNzTmFtZShjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgY29udGFpbmVyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gMDtcclxuICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9IDA7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnpJbmRleCA9IHRoaXMuekluZGV4O1xyXG4gICAgICAgIHByZXBlbmRFbGVtZW50KHdpbmRvdy5kb2N1bWVudC5ib2R5LCBjb250YWluZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufTsiLCJmdW5jdGlvbiBDbGllbnQoKSB7XHJcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XHJcblxyXG4gICAgdGhpcy5wYXJhbXMgPSBwYXJzZVBhcmFtcygpO1xyXG4gICAgdmFyIG5hbWUgPSBmaWx0ZXJCeUtleVZhbHVlKHRoaXMucGFyYW1zLCAnbmFtZScsICduYW1lJywgdHJ1ZSk7XHJcbiAgICB2YXIgb3JpZ2luID0gZmlsdGVyQnlLZXlWYWx1ZSh0aGlzLnBhcmFtcywgJ25hbWUnLCAnb3JpZ2luJyk7XHJcbiAgICBpZiAoIWlzRGVmaW5lZChuYW1lKSB8fCAhaXNEZWZpbmVkKG9yaWdpbikpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ0EgRnJhbWVyIENsaWVudCB3aWxsIG5vdCB3b3JrIHdpdGhvdXQgdGhlIGNvcnJlY3Qgb3JpZ2luIGFuZCBuYW1lIHVybCBhcmdzLCBvcmlnaW4gYW5kIG5hbWUnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lLmRhdGE7XHJcbiAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbi5kYXRhO1xyXG5cclxuICAgIHRoaXMubGlzdGVuKCk7XHJcbn1cclxuXHJcbkNsaWVudC5wcm90b3R5cGUucmVjZWl2ZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudCAmJlxyXG4gICAgICAgIGV2ZW50Lm9yaWdpbiAmJlxyXG4gICAgICAgIGV2ZW50Lm9yaWdpbiAhPT0gd2luZG93LnRvcC5kb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV2ZW50LmRhdGEubWVzc2VuZ2VyID09PSBNYW5hZ2VyTWVzc2FnZSAmJlxyXG4gICAgICAgIChldmVudC5kYXRhLnRhcmdldCA9PT0gdGhpcy5uYW1lIHx8XHJcbiAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEudGFyZ2V0ID09PSAndW5kZWZpbmVkJykpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5DbGllbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMudW5MaXN0ZW4oKTtcclxufTtcclxuXHJcbkNsaWVudC5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2UoZXZlbnQpO1xyXG4gICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgIHdpbmRvdy50b3AuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMubGlzdGVuZXIsIGZhbHNlKTtcclxufTtcclxuXHJcbkNsaWVudC5wcm90b3R5cGUudW5MaXN0ZW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy50b3AucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMubGlzdGVuZXIpO1xyXG4gICAgdGhpcy5saXN0ZW5lciA9IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbkNsaWVudC5wcm90b3R5cGUuaGFuZGxlTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gZmlsdGVyQnlLZXlWYWx1ZSh0aGlzLmhhbmRsZXJzLCAndHlwZScsIG1lc3NhZ2UudHlwZSk7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgcmVzdWx0LmNhbGxiYWNrLmFwcGx5KHRoaXMsIFttZXNzYWdlLmRhdGFdKTtcclxuICAgIH1cclxufTtcclxuXHJcbkNsaWVudC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uICh0eXBlLCBkYXRhLCB0YXJnZXQpIHtcclxuICAgIGlmICghaXNEZWZpbmVkKHRoaXMubmFtZSkgfHwgIWlzRGVmaW5lZCh0aGlzLm9yaWdpbikpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0ZyYW1lciBDbGllbnQgaGFzIG5vIE1hbmFnZXIgdG8gc2VuZCcsIHR5cGUsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBtZXNzYWdlID0gbmV3IEZyYW1lTWVzc2FnZSh0eXBlLCBkYXRhLCB0aGlzLm5hbWUsIHRhcmdldCwgQ2xpZW50TWVzc2FnZSk7XHJcbiAgICB3aW5kb3cudG9wLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMub3JpZ2luKTtcclxufTtcclxuXHJcbkNsaWVudC5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodHlwZSwgY2FsbGJhY2spIHtcclxuICAgIGlmICghZmlsdGVyQnlLZXlWYWx1ZSh0aGlzLmhhbmRsZXJzLCAndHlwZScsIHR5cGUpKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHtcclxuICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lvdSBhbHJlYWR5IGhhdmUgYSBjYWxsYmFjayBmb3IgdHlwZScsIG5hbWUpO1xyXG4gICAgfVxyXG59OyIsImZ1bmN0aW9uIGFuZ3VsYXJDbG9zZUZyYW1lV2luZG93KGZyYW1lKSB7XHJcbiAgICB2YXIgY2hpbGRXaW5kb3cgPSBmcmFtZS5mcmFtZUVsZW1lbnQuY29udGVudFdpbmRvdztcclxuICAgIHZhciBuZ0FwcCA9IGNoaWxkV2luZG93LmFuZ3VsYXIuZWxlbWVudChjaGlsZFdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcmFtZS5vcHRpb25zLmFuZ3VsYXJBcHBJZCkpO1xyXG4gICAgY29uc29sZS5sb2coJ25nQXBwJywgbmdBcHApO1xyXG5cclxuICAgIHZhciBpbmplY3RvciA9IGNoaWxkV2luZG93LmFuZ3VsYXIuZWxlbWVudChuZ0FwcCkuaW5qZWN0b3IoKTtcclxuICAgIGRlc3Ryb3lBbGxTY29wZXMoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBkZXN0cm95QWxsU2NvcGVzKCkge1xyXG4gICAgICAgIHZhciByb290U2NvcGUgPSBpbmplY3Rvci5nZXQoJyRyb290U2NvcGUnKTtcclxuICAgICAgICByb290U2NvcGUuJGJyb2FkY2FzdChcIiRkZXN0cm95XCIpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbG9zZUZyYW1lV2luZG93KGZyYW1lKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==